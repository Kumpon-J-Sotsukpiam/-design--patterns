![img](assets/command/command-mini.png)
# Command
Encapsulate a request as an object, thereby letting you parameterize clients with different requests, queue or log requests, and support undoable operations.

## üéØ ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á pattern ‡∏ô‡∏µ‡πâ
‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Action ‡∏ï‡πà‡∏≤‡∏á‡πÜ‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô object ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ action ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÜ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏∂‡πà‡∏á‡πÑ‡∏õ

## ‚úå ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ö‡∏™‡∏±‡πâ‡∏ô‡πÜ
1. xxx

## üò¢ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤
![img](assets/command/command.png)

‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ô‡∏∂‡∏Å‡∏™‡∏ô‡∏∏‡∏Å ‡πÄ‡∏•‡∏¢‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° Text editor ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÜ‡∏ï‡∏±‡∏ß‡∏ô‡∏∂‡∏á ‡∏ã‡∏∂‡πà‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏°‡∏µ Toolbar ‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô ‡∏ã‡∏∂‡πà‡∏á‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏∞‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢ ‡∏ã‡∏∂‡πà‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏∏‡∏Å‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏°‡∏≤‡∏à‡∏≤‡∏Å `Button` class ‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ

![img](assets/command/problem1.png)

‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô toolbar ‡∏ô‡∏±‡πâ‡∏ô ‡∏°‡∏±‡∏ô‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏ã‡∏∂‡πà‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢ ‡πÄ‡∏•‡∏¢‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á subclass ‡∏Ç‡∏≠‡∏á‡∏°‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≤‡∏á‡πÜ‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ ‡πÄ‡∏ä‡πà‡∏ô `‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏Å‡∏•‡∏á`, `‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å`, `‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å` ‡∏ö‡∏•‡∏≤‡πÜ ‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á

![img](assets/command/problem2.png)

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏û‡∏∂‡πà‡∏á‡πÄ‡∏≠‡∏∞‡πÉ‡∏à‡∏ß‡πà‡∏≤ ‡∏ô‡∏±‡πà‡∏ô‡∏°‡∏±‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏ö‡πâ‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡∏±‡∏ô‡∏ü‡∏£‡∏∞‡πÄ‡∏ô‡∏µ‡πà‡∏¢‡∏ô subclass ‡∏¢‡∏±‡πâ‡∏ß‡πÄ‡∏¢‡∏µ‡πâ‡∏¢‡πÄ‡∏ï‡πá‡∏°‡πÑ‡∏õ‡∏´‡∏°‡∏î ‡∏´‡∏¢‡∏±‡πà‡∏á‡∏Å‡∏∞‡πÅ‡∏°‡∏•‡∏á‡∏™‡∏≤‡∏ö!! ‡∏¢‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏ô toolbar ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà subclass ‡∏Å‡πá‡∏à‡∏∞‡∏¢‡∏¥‡πà‡∏á‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

‡∏¢‡∏±‡∏á‡∏°‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡πà‡∏≤‡πÄ‡∏Å‡∏•‡∏µ‡∏¢‡∏î‡∏≠‡∏µ‡∏Å‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏≤‡∏°‡∏≠‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÄ‡∏£‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤ **‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å** ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô toolbar, **‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å** ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡πÄ‡∏°‡∏ô‡∏π ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏°‡πâ‡∏Å‡∏£‡∏∞‡∏ó‡∏±‡πà‡∏á **‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å** ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏•‡∏±‡∏î ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏£‡∏¥‡∏á‡πÜ‡∏°‡∏±‡∏ô‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡πÇ‡∏Ñ‡πâ‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ô‡∏¥‡∏´‡∏ß‡πà‡∏≤!! ‡πÄ‡∏£‡∏≤‡πÅ‡∏Ñ‡πà‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á subclass ‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡πâ‡∏ß copy ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô subclass ‡∏û‡∏ß‡∏Å‡∏ô‡∏±‡πâ‡∏ô ‡∏ï‡∏≤‡∏°‡∏£‡∏π‡∏õ‡πÄ‡∏•‡∏¢

![img](assets/command/problem3.png)

‡∏°‡∏±‡∏ô‡∏ú‡∏¥‡∏î‡∏Å‡∏•‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏°‡∏±‡∏ô‡∏°‡∏µ‡πÅ‡∏Ñ‡πà toolbar ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÅ‡∏ï‡πà‡∏û‡∏≠‡∏ó‡∏≥‡πÑ‡∏õ‡πÜ‡∏ã‡∏±‡∏Å‡∏û‡∏±‡∏Å ‡∏°‡∏±‡∏ô‡∏Å‡πá‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏£‡∏á‡∏ô‡∏±‡πâ‡∏ô ‡∏ï‡∏£‡∏á‡∏ô‡∏π‡πâ‡∏ô ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡∏°‡∏±‡∏ô‡πÄ‡∏•‡∏¢‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏£‡∏≤ `‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÑ‡∏°‡πà‡∏î‡∏µ` ‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ

> ‡πÇ‡∏î‡πÄ‡∏£‡∏°‡πà‡∏≠‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏ô‡∏≠‡∏ï‡∏≠‡∏ô **‡πÇ‡∏Ñ‡πâ‡∏î‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÑ‡∏°‡πà‡∏î‡∏µ** (‡πÄ‡∏Ñ‡∏¢‡∏î‡∏°‡∏°‡∏±‡πà‡∏ô‡∏õ‡∏∞?)  
‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡πÑ‡∏°‡πà‡∏î‡∏µ‡∏ô‡∏±‡πâ‡∏ô ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡∏û‡∏π‡∏î‡∏ñ‡∏∂‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏™‡∏π‡∏á ‡πÄ‡∏ä‡πà‡∏ô ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ñ‡∏π‡∏Å‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ã‡πâ‡∏≥‡πÜ‡∏´‡∏•‡∏≤‡∏¢‡πÜ‡∏ó‡∏µ‡πà, ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏•‡∏≤‡∏™‡πÉ‡∏´‡∏ç‡πà‡∏°‡πä‡∏ß‡∏Å‡∏Å‡∏Å‡∏Å ‡∏ö‡∏•‡∏≤‡πÜ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏û‡∏ß‡∏Å‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏°‡∏µ‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏£‡∏ß‡∏à‡πÉ‡∏ô‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤ `Code smell` ‡∏ô‡∏±‡πà‡∏ô‡πÄ‡∏≠‡∏á

‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏Ñ‡∏≤‡∏ß‡∏õ‡∏•‡∏≤‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏î‡∏µ‡∏•‡∏∞? (‡πÅ‡∏´‡∏ß‡∏∞)

## üòÑ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏õ‡∏ï‡πà‡∏≠‡∏Ç‡∏≠‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏Å‡∏õ‡∏é‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ Separation of concerns (SoC) ‡∏ô‡∏¥‡πä‡∏™‡∏ô‡∏∏‡∏á

> **Separation of concerns**  
‡∏Ñ‡∏∑‡∏≠‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÉ‡∏ô design principle ‡∏ã‡∏∂‡πà‡∏á‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏ß‡πà‡∏≤ ‡πÄ‡∏£‡∏≤‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡πÜ ‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏°‡∏±‡∏ô (‡∏à‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏•‡∏∞‡∏Å‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏à‡∏∞‡∏¢‡∏≤‡∏ß ‡πÑ‡∏õ‡∏´‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏≠‡∏á‡∏ô‡∏∞‡∏à‡∏∏‡πä)

‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡∏°‡∏≠‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ß‡πà‡∏≤‡∏°‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏£‡∏≤ ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏à‡∏∞‡∏û‡∏ö‡∏ß‡πà‡∏≤ `‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏ã‡∏ü‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ UI ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏Ñ‡∏∑‡∏≠ ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÑ‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ method ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢` ‡∏ô‡∏±‡πà‡∏ô‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏°‡∏±‡∏ô‡∏Ç‡∏±‡∏î‡∏Å‡∏±‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á Separation of concerns ‡πÄ‡∏•‡∏¢‡∏ô‡∏¥ ‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏´‡∏ß‡πà‡∏≤?

‡∏á‡∏±‡πâ‡∏ô‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏™‡∏Å‡∏∞‡∏î‡πä‡∏≤‡∏¢
> ‡∏°‡∏±‡∏ô‡∏Ç‡∏±‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏¢‡∏±‡∏á‡πÑ‡∏á? (‡∏ü‡∏£‡∏∞)  
‡πÇ‡∏î‡∏¢‡∏õ‡∏£‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á‡πÜ‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° ‡πÄ‡∏ä‡πà‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÅ‡∏¢‡∏Å‡∏°‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô concern ‡πÉ‡∏ô‡∏î‡πâ‡∏≤‡∏ô UI layer (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏á‡∏≤‡∏ô‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏π‡πÅ‡∏•‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß) ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏±‡∏ô‡∏ú‡∏¥‡∏î‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏£‡∏≤‡∏∞ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡∏π‡∏Å‡∏Å‡∏î‡∏õ‡∏∏‡πä‡∏õ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÑ‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏£‡∏á‡πÜ‡πÄ‡∏•‡∏¢ ‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÜ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡πà‡∏á Business logic layer ‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å

‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà UI layer ‡πÑ‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Business logic layer ‡∏ï‡∏£‡∏á‡πÜ ‡∏û‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏°‡∏±‡∏ô‡πÄ‡∏•‡∏¢‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏£‡∏≤‡∏°‡∏±‡∏ô‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏û‡∏ô‡∏µ‡πâ

![img](assets/command/solution1-en.png)

‡∏ã‡∏∂‡πà‡∏á‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏Ç‡∏≠‡∏á `Command Pattern` ‡πÄ‡∏™‡∏ô‡∏≠‡∏ß‡πà‡∏≤ ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏∞‡∏ó‡∏≥ `(Action)` ‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô object ‡∏ã‡∏∞ ‡πÅ‡∏•‡∏∞‡∏ñ‡πâ‡∏≤‡∏°‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ï‡πà‡∏≤‡∏á‡πÜ‡∏Å‡πá‡πÉ‡∏´‡πâ‡∏¢‡∏±‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÉ‡∏ô object ‡∏ô‡∏±‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏•‡∏¢ ‡∏ã‡∏∂‡πà‡∏á object ‡∏û‡∏ß‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏°‡∏±‡∏ô‡∏ß‡πà‡∏≤ `Command` ‡∏ô‡∏±‡πà‡∏ô‡πÄ‡∏≠‡∏á

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡∏π‡∏Å‡∏Å‡∏î ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á command object ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏ï‡∏±‡∏ß command object ‡∏ô‡∏µ‡πâ‡πÅ‡∏´‡∏•‡∏∞‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏™‡∏°‡∏∑‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á UI layer ‡∏Å‡∏±‡∏ö Business logic layer

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ UI layer ‡πÅ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å Business logic layer ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ (‡πÅ‡∏¢‡∏Å‡∏Ç‡∏≤‡∏î‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ) ‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏û‡πÄ‡∏•‡∏¢

![img](assets/command/solution2-en.png)

‡∏ï‡∏±‡∏ß Command ‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡∏à‡∏∞ implement `Interface` ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏à‡πâ‡∏≤ interface ‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏∞‡∏°‡∏µ‡πÅ‡∏Ñ‡πà `Execute()` method ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á/‡∏£‡∏±‡∏ö command ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡∏π‡∏Å‡∏ï‡∏¥‡∏î (coupling) ‡∏Å‡∏±‡∏ö concrete command ‡πÉ‡∏î‡πÜ

‡πÅ‡∏•‡πâ‡∏ß‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πà‡∏≤‡∏á‡πÜ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏Å‡∏±‡∏ö command ‡∏•‡∏∞? ‡πÄ‡∏ä‡πà‡∏ô‡∏Å‡∏î‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á `‡∏™‡∏µ` ‡πÄ‡∏õ‡πá‡∏ô parameter ‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏¥‡∏ô‡πà‡∏≤

‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏∑‡∏≠ ‡πÄ‡∏à‡πâ‡∏≤‡∏ï‡∏±‡∏ß command ‡πÄ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏ô‡πÅ‡∏´‡∏•‡∏∞‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢ ‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏û‡πÄ‡∏•‡∏¢

![img](assets/command/solution3.png)

‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏±‡πâ‡∏ô‡πÜ‡∏Å‡πà‡∏≠‡∏ô ‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡∏Ç‡∏≠‡∏á `Command object`

‡∏ñ‡∏±‡∏î‡∏°‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ Command ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÄ‡∏£‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡πâ‡∏ô‡∏ß‡πà‡∏≤ `Invoker` 

‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡πÄ‡∏°‡∏∑‡πà‡∏≠ invoker ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ command ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏ï‡∏±‡∏ß command ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏Ñ‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô  ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏õ‡∏ó‡∏≥‡∏à‡∏£‡∏¥‡∏á‡πÜ‡πÄ‡∏£‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏°‡∏±‡∏ô‡∏ß‡πà‡∏≤ `Receiver`

## üìå ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á pattern ‡∏ô‡∏µ‡πâ
![img](assets/command/structure-2x.png)

> **‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢**  
**Invoker** - ‡πÄ‡∏Å‡πá‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö command ‡∏ï‡πà‡∏≤‡∏á‡πÜ‡∏ó‡∏µ‡πà‡∏°‡∏µ ‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ client ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠ client ‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ ‡πÄ‡∏à‡πâ‡∏≤ invoker ‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ command object ‡πÑ‡∏õ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô  
**Command** - ‡πÄ‡∏õ‡πá‡∏ô interface ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö concreate command ‡∏õ‡∏£‡∏Å‡∏ï‡∏¥‡∏à‡∏∞‡∏°‡∏µ‡πÅ‡∏Ñ‡πà Execute() method ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß  
**Concrete Commands** - ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á ‡∏ã‡∏∂‡πà‡∏á‡∏ï‡∏±‡∏ß‡∏°‡∏±‡∏ô‡πÄ‡∏≠‡∏á‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏≠‡∏á ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÉ‡∏´‡πâ Business logic object ‡πÑ‡∏õ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≠  
**Receiver** - ‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏≤‡∏á‡∏≤‡∏ô‡πÑ‡∏õ‡∏ó‡∏≥‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô Business logic ‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà  
**Client** - ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á concrete command object ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö invoker ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

## üõ† ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
‡∏™‡∏°‡∏°‡∏∏‡∏ï‡∏¥‡∏ß‡πà‡∏≤‡∏ú‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏° ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î Tv ‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏µ‡πÇ‡∏°‡∏ï ‡πÇ‡∏î‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏£‡∏µ‡πÇ‡∏°‡∏ï‡∏ï‡∏±‡∏ß‡∏ô‡∏µ‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á Undo ‡πÅ‡∏•‡∏∞ Redu ‡∏≠‡∏µ‡∏Å‡∏î‡πâ‡∏ß‡∏¢ (‡πÄ‡∏à‡πã‡∏á‡∏õ‡∏∞‡∏•‡∏∞?)

‡∏õ‡∏∞‡πÑ‡∏õ‡∏î‡∏π‡πÇ‡∏Ñ‡πâ‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô

## üëç ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ
* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Undo/Redo (CTRL+Z ‡∏Å‡∏±‡∏ö CTRL+Y)
* ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏±‡πà‡∏á‡∏á‡∏≤‡∏ô command ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

## üëé ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢
* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á class ‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢

## ‚Äç‚Äçüìù Code ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
```
using System;
using System.Linq;
using System.Collections.Generic;

// Command Interface
interface ICommand
{
    void Execute();
    void Undo();
    void Redu();
}

// Concrete Commands
class TurnOnTelevisionCommand : ICommand
{
    private Television tv;

    public TurnOnTelevisionCommand(Television tv)
        => this.tv = tv;

    public void Execute()
        => tv.TurnOn();

    public void Undo()
        => tv.TurnOff();

    public void Redu()
        => tv.TurnOn();
}
class TurnOffTelevisionCommand : ICommand
{
    private Television tv;

    public TurnOffTelevisionCommand(Television tv)
        => this.tv = tv;

    public void Execute()
        => tv.TurnOff();

    public void Undo()
        => tv.TurnOn();

    public void Redu()
        => tv.TurnOff();
}
class ChangeChannelCommand : ICommand
{
    private Television tv;
    private int channel;
    private int previousChannel;

    public ChangeChannelCommand(Television tv, int channel)
    { 
        this.tv = tv;
        this.channel = channel;
    }

    public void Execute()
    {
        previousChannel = tv.CurrentChannel;
        tv.ChangeChannel(channel);
    }

    public void Undo()
        => tv.ChangeChannel(previousChannel);

    public void Redu()
        => tv.ChangeChannel(channel);
}

// Receiver
class Television
{
    public int CurrentChannel { get; private set; }

    public void TurnOff()
        => Console.WriteLine("Tv ‡∏õ‡∏¥‡∏î");

    public void TurnOn()
        => Console.WriteLine("Tv ‡πÄ‡∏õ‡∏¥‡∏î");
    
    public void ChangeChannel(int channel)
    {
        CurrentChannel = channel;
        Console.WriteLine($"‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πà‡∏≠‡∏á Tv ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏≠‡∏á {channel}");
    }
}

// Invoker
class TelevisionRemoteInvoker
{
    private IList<ICommand> undoStack;
    private IList<ICommand> redoStack;

    public TelevisionRemoteInvoker()
    {
        undoStack = new List<ICommand>();
        redoStack = new List<ICommand>();
    }

    public void Execute(ICommand cmd)
    {
        cmd.Execute();
        undoStack.Add(cmd);
    }

    public void Undo()
    {
        if(!undoStack.Any())
            return;
        
        var previousCmd = undoStack.Last();
        previousCmd.Undo();
        undoStack.Remove(previousCmd);
        redoStack.Add(previousCmd);
    }

    public void Redu()
    {
        if(!redoStack.Any())
            return;
        
        var previousCmd = redoStack.Last();
        previousCmd.Redu();
        redoStack.Remove(previousCmd);
        undoStack.Add(previousCmd);
    }
}

// Client
class Program
{
    static void Main(string[] args)
    {
        var tv = new Television();
        var remote = new TelevisionRemoteInvoker();
        Console.Write("‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î, ");
        remote.Execute(new TurnOnTelevisionCommand(tv));

        Console.Write("‡∏™‡∏±‡πà‡∏á‡∏õ‡∏¥‡∏î, ");
        remote.Execute(new TurnOffTelevisionCommand(tv));

        Console.Write("‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡πÑ‡∏õ‡πÄ‡∏°‡∏∑‡πâ‡∏≠‡∏Å‡∏µ‡πâ (CTRL+Z), ");
        remote.Undo();

        Console.Write("‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πà‡∏≠‡∏á, ");
        remote.Execute(new ChangeChannelCommand(tv, 72));

        Console.Write("‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πà‡∏≠‡∏á, ");
        remote.Execute(new ChangeChannelCommand(tv, 55));

        Console.Write("‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡πÑ‡∏õ‡πÄ‡∏°‡∏∑‡πâ‡∏≠‡∏Å‡∏µ‡πâ (CTRL+Z), ");
        remote.Undo();
        
        Console.Write("‡∏ó‡∏≥‡∏ã‡πâ‡∏≥ (CTRL+Y), ");
        remote.Redu();
    }
}
```

**Output**
```
‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏¥‡∏î, Tv ‡πÄ‡∏õ‡∏¥‡∏î
‡∏™‡∏±‡πà‡∏á‡∏õ‡∏¥‡∏î, Tv ‡∏õ‡∏¥‡∏î
‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡πÑ‡∏õ‡πÄ‡∏°‡∏∑‡πâ‡∏≠‡∏Å‡∏µ‡πâ (CTRL+Z), Tv ‡πÄ‡∏õ‡∏¥‡∏î
‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πà‡∏≠‡∏á, ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πà‡∏≠‡∏á Tv ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏≠‡∏á 72
‡∏™‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πà‡∏≠‡∏á, ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πà‡∏≠‡∏á Tv ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏≠‡∏á 55
‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡πÑ‡∏õ‡πÄ‡∏°‡∏∑‡πâ‡∏≠‡∏Å‡∏µ‡πâ (CTRL+Z), ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πà‡∏≠‡∏á Tv ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏≠‡∏á 72
‡∏ó‡∏≥‡∏ã‡πâ‡∏≥ (CTRL+Y), ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡πà‡∏≠‡∏á Tv ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏≠‡∏á 55
```

# Credit
https://refactoring.guru  
You can buy his book by click the image below.  
[![img](https://refactoring.guru/images/patterns/book/web-cover-en.png)](https://refactoring.guru/design-patterns/book#buy-now)  